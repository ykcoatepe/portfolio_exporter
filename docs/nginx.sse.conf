# Portfolio Sentinel Dashboard behind NGINX
#
# The /stream endpoint uses Server-Sent Events (SSE). Buffering must be disabled so
# events flow to the browser immediately. PSD already emits "X-Accel-Buffering: no",
# which NGINX honors when proxy_buffering is off.

location /stream {
  proxy_pass http://127.0.0.1:51127/stream;
  proxy_http_version 1.1;
  proxy_set_header Connection "";
  proxy_read_timeout 1h;
  proxy_send_timeout 1h;
  # SSE must not be buffered
  proxy_buffering off;
  gzip off;
}

# Remaining endpoints follow the default proxy configuration.
location / {
  proxy_pass http://127.0.0.1:51127;
}
