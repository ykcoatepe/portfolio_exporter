{
  "changelog": [
    {
      "details": "--preset support in order_builder; trade menu Stage Order preset path; sanity script scripts/sanity_order_builder_presets.sh; Makefile sanity-order-builder; pyproject console entry 'order-builder'.",
      "event": "Add order builder presets and trade menu preset flow",
      "timestamp": "2025-08-30T04:38:24Z"
    },
    {
      "event": "Trades menu enhancements: intent summary, P&L, MTM preview",
      "details": "Executions: intent totals & by-underlying; Top combos by realized P&L; combos CSV/Excel include pnl; MTM preview (key 'm') using mid quotes; format toggle (key 't'); open last ticket (key 'k'); filters prefill/persist; daily-report open prompt; roll preview DTE; persisted preferences.trades_prior_positions.",
      "timestamp": "2025-09-09T09:15:00Z"
    },
    {
      "event": "Tests run (dev_yordam)",
      "details": "Initiated pytest run and triaged failures; applied patches for UI import stability, IB guards, live_feed return_df, trades_report clustering and menu prompts. Ongoing fixes for CLI scripts (tech_signals_ibkr, wizards) queued.",
      "timestamp": "2025-09-10T00:00:00Z"
    },
    {
      "event": "Trades report: fix Action + intent; restore combos",
      "details": "Normalize Side/side and BOT/SLDâ†’BUY/SELL; position_effect streaming uses Side.fillna(side), keys STK by symbol, and honors openClose. Fallback uses realized_pnl when prior absent. save_combos default restored to emit trades_combos.csv. Docs updated; memory prefers preferences.trades_prior_positions when present.",
      "timestamp": "2025-09-11T00:00:00Z"
    },
    {
      "event": "Micro-MOMO v1 landed (CSV-only)",
      "details": "Added CLI micro-momo; filters, scoring, tiering, direction, structure picker, sizing + TP/SL, triggers; outputs scored+orders CSV; tests & fixtures; Makefile sanity-micro-momo.",
      "timestamp": "2025-09-13T13:00:00Z"
    },
    {
      "event": "Micro-MOMO v1.1 enrichment + halts + provenance",
      "details": "--data-mode/--providers/--offline/--halts-source; IBKR quotes/bars/shortable/chains primary; Yahoo fundamentals/chains fallback; Nasdaq halts; provenance src_* and data_errors in outputs; tests mock providers (no network).",
      "timestamp": "2025-09-13T13:40:00Z"
    }
  ],
  "decisions": [
    {
      "context": "Offline-only; no market calls. Added sanity script + Makefile target and console entry.",
      "decision": "Added preset-driven order builder and Stage Order preset wizard; standardized JSON envelope and risk_summary when determinable.",
      "id": 1,
      "timestamp": "2025-08-30T04:38:24Z",
      "title": "ORDER_BUILDER_PRESETS_V1"
    },
    {
      "id": 2,
      "title": "TRADES_MENU_ENHANCEMENTS_V1",
      "decision": "Expose intent summary and realized P&L in menu; add MTM preview; persist prior positions path; extend Stage Order auto-build for butterfly and calendar.",
      "context": "Keep offline-friendly; JSON-only previews; clipboard in interactive mode; prefer strictly prior positions snapshot when available.",
      "timestamp": "2025-09-09T09:15:00Z"
    },
    {
      "id": 3,
      "title": "TEST_HARDENING_V1",
      "decision": "Align imports to module-level for monkeypatching, add test hooks (_snapshot_quotes, prompt_input alias, run_with_spinner alias), guard IB connectivity checks, and make clustering robust to missing columns.",
      "context": "Goal: reduce import-time coupling and stabilize CLI/menu tests without impacting runtime behavior.",
      "timestamp": "2025-09-10T00:00:00Z"
    },
    {
      "id": 4,
      "title": "TRADES_REPORT_INTENT_FIXES_V1",
      "decision": "Correct Action mapping (BUY/SELL vs BOT/SLD), improve position_effect (Side.fillna(side); STK keyed by symbol; openClose override; realized_pnl fallback), restore combos CSV by default, and use memory preferences.trades_prior_positions when available.",
      "context": "Make intent robust without prior snapshot and consistent across menu/CLI; keep offline-friendly behaviour.",
      "timestamp": "2025-09-11T00:00:00Z"
    },
    {
      "id": 5,
      "title": "MICRO_MOMO_V1",
      "decision": "CSV-only Micro-MOMO Analyzer landed: filters, weighted scoring, A/B/C tiers, direction, option structure picker (Debit Call / Bear Call Credit), sizing + TP/SL, human-readable triggers; CLI + tests + fixtures; scored/orders CSV outputs.",
      "context": "Deterministic v1 with no providers; Makefile sanity target; module entry portfolio_exporter.scripts.micro_momo_analyzer.",
      "timestamp": "2025-09-13T13:00:00Z"
    },
    {
      "id": 6,
      "title": "MICRO_MOMO_V1_1",
      "decision": "Live enrichment via IBKR (primary) and Yahoo (fallback) with halts + provenance. Adds --data-mode/--providers/--offline/--halts-source flags; enrichment fills last/prev_close, premarket gap, RVOL(1m/5m), VWAP, ORB, float/ADV/short%, borrow, chain near-money OI/spread, halts_count_today. Provenance src_* columns and data_errors included.",
      "context": "CI-safe via offline mode; tests mock providers; CSV precedence respected in enrich mode.",
      "timestamp": "2025-09-13T13:40:00Z"
    }
  ],
  "preferences": {
    "order_builder_wizard": {
      "profile": "balanced",
      "avoid_earnings": false,
      "min_oi": 200,
      "min_volume": 50,
      "max_spread_pct": 0.02,
      "risk_budget_pct": 1.0,
      "strike_offset": 0
    },
    "trades_filters": {
      "symbols": "",
      "effect": "",
      "structure": "",
      "top_n": ""
    },
    "trades_prior_positions": "",
    "quiet": true
  },
  "questions": [],
  "tasks": [],
  "workflows": {
    "submenu_queue": {
      "live": ["quick-chain", "daily-report"],
      "sanity": ["trades-report", "daily-report"]
    }
  }
}
